import type { Unit, Lesson } from '@/lib/types';

const lesson1: Lesson = {
  id: 'b2-u3-l1',
  unitId: 'b2-u3',
  title: 'Formation: had been + -ing',
  description: 'Learn the basic structure of the past perfect continuous tense',
  order: 1,
  xpReward: 20,
  grammarPoint: 'had been + verb-ing',
  vocabularyWords: ['had', 'been', 'working', 'studying', 'waiting', 'living', 'running', 'talking'],
  exercises: [
    {
      id: 'b2-u3-l1-e1',
      type: 'multiple-choice',
      instruction: 'Select the correct answer',
      question: 'How is the past perfect continuous formed?',
      options: ['had been + verb-ing', 'have been + verb-ing', 'had + past participle', 'was/were + verb-ing'],
      correctAnswer: 0,
      points: 10,
      explanation: 'The past perfect continuous is formed with had been + verb-ing.',
    },
    {
      id: 'b2-u3-l1-e2',
      type: 'fill-blank',
      instruction: 'Complete the sentence',
      question: 'I ___ ___ working all day.',
      correctAnswer: 'had been',
      points: 10,
      explanation: 'Use "had been" + verb-ing for all subjects in past perfect continuous.',
    },
    {
      id: 'b2-u3-l1-e3',
      type: 'fill-blank',
      instruction: 'Complete the sentence',
      question: 'She ___ ___ studying for hours.',
      correctAnswer: 'had been',
      points: 10,
    },
    {
      id: 'b2-u3-l1-e4',
      type: 'multiple-choice',
      instruction: 'Select the correct sentence',
      question: 'Which sentence is correct?',
      options: ['They had been waiting for an hour.', 'They have been waiting for an hour.', 'They had waiting for an hour.', 'They been waiting for an hour.'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l1-e5',
      type: 'word-order',
      instruction: 'Put the words in the correct order',
      words: ['had', 'I', 'been', 'running', 'for', 'miles'],
      correctOrder: [1, 0, 2, 3, 4, 5],
      points: 10,
      explanation: 'Correct order: I had been running for miles.',
    },
    {
      id: 'b2-u3-l1-e6',
      type: 'true-false',
      instruction: 'Is this statement correct?',
      statement: 'The past perfect continuous uses "had been" for all subjects.',
      correctAnswer: true,
      points: 10,
      explanation: 'Unlike present perfect continuous, we use "had been" for I, you, he, she, it, we, they.',
    },
    {
      id: 'b2-u3-l1-e7',
      type: 'fill-blank',
      instruction: 'Complete the sentence',
      question: 'We ___ ___ living there for years.',
      correctAnswer: 'had been',
      points: 10,
    },
    {
      id: 'b2-u3-l1-e8',
      type: 'translation',
      instruction: 'Translate to English',
      question: 'Había estado trabajando todo el día.',
      correctAnswer: 'I had been working all day',
      acceptableAnswers: ['I\'d been working all day'],
      points: 10,
    },
    {
      id: 'b2-u3-l1-e9',
      type: 'error-correction',
      instruction: 'Find and correct the error',
      sentence: 'He has been waiting for hours before she arrived.',
      correctAnswer: 'He had been waiting for hours before she arrived.',
      points: 10,
      errorExplanation: 'Use past perfect continuous (had been), not present perfect continuous (has been), when referring to a past action before another past action.',
    },
    {
      id: 'b2-u3-l1-e10',
      type: 'matching',
      instruction: 'Match the subjects with correct forms',
      pairs: [
        { left: 'I', right: 'had been reading' },
        { left: 'She', right: 'had been working' },
        { left: 'They', right: 'had been playing' },
        { left: 'We', right: 'had been studying' },
      ],
      points: 10,
    },
  ],
};

const lesson2: Lesson = {
  id: 'b2-u3-l2',
  unitId: 'b2-u3',
  title: 'Duration before a past moment',
  description: 'Express how long something had been happening before a past event',
  order: 2,
  xpReward: 20,
  grammarPoint: 'Duration up to a point in the past',
  vocabularyWords: ['before', 'when', 'until', 'by the time', 'already', 'finally', 'eventually', 'duration'],
  exercises: [
    {
      id: 'b2-u3-l2-e1',
      type: 'multiple-choice',
      instruction: 'Select the correct answer',
      question: 'We use past perfect continuous to show:',
      options: ['How long something continued before a past moment', 'How long something will continue', 'A present ongoing action', 'A future action'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l2-e2',
      type: 'fill-blank',
      instruction: 'Complete the sentence',
      question: 'I ___ ___ waiting for two hours when she finally arrived.',
      correctAnswer: 'had been',
      points: 10,
      explanation: 'The waiting lasted for two hours up until her arrival.',
    },
    {
      id: 'b2-u3-l2-e3',
      type: 'translation',
      instruction: 'Translate to English',
      question: 'Habían estado viviendo allí durante 10 años cuando se mudaron.',
      correctAnswer: 'They had been living there for 10 years when they moved',
      points: 10,
    },
    {
      id: 'b2-u3-l2-e4',
      type: 'word-order',
      instruction: 'Put the words in the correct order',
      words: ['had', 'She', 'been', 'studying', 'for', 'months', 'before', 'the', 'exam'],
      correctOrder: [1, 0, 2, 3, 4, 5, 6, 7, 8],
      points: 10,
    },
    {
      id: 'b2-u3-l2-e5',
      type: 'fill-blank',
      instruction: 'Complete the sentence',
      question: 'By the time he called, we ___ ___ waiting for an hour.',
      correctAnswer: 'had been',
      points: 10,
    },
    {
      id: 'b2-u3-l2-e6',
      type: 'context-completion',
      instruction: 'Choose the best option',
      context: 'They ___ working on the project for weeks when the deadline was changed.',
      options: ['had been', 'have been', 'were', 'are'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l2-e7',
      type: 'multiple-choice',
      instruction: 'Select the correct sentence',
      question: 'Which emphasizes the duration?',
      options: ['I had been running for 30 minutes when it started raining.', 'I had run for 30 minutes when it started raining.', 'I ran for 30 minutes when it started raining.', 'I was running when it started raining.'],
      correctAnswer: 0,
      points: 10,
      explanation: 'Past perfect continuous emphasizes the ongoing duration of the action.',
    },
    {
      id: 'b2-u3-l2-e8',
      type: 'fill-blank',
      instruction: 'Complete the sentence',
      question: 'He ___ ___ playing video games for hours before his mom came home.',
      correctAnswer: 'had been',
      points: 10,
    },
    {
      id: 'b2-u3-l2-e9',
      type: 'error-correction',
      instruction: 'Find and correct the error',
      sentence: 'We have been waiting for hours when the bus finally arrived.',
      correctAnswer: 'We had been waiting for hours when the bus finally arrived.',
      points: 10,
      errorExplanation: 'Use past perfect continuous (had been) for an action before another past event.',
    },
    {
      id: 'b2-u3-l2-e10',
      type: 'dialogue-completion',
      instruction: 'Complete the conversation',
      dialogue: [
        { speaker: 'A', text: 'You looked tired yesterday.' },
        { speaker: 'B', text: 'Yes, I ___ working all night.', isBlank: true },
      ],
      options: ['had been', 'have been', 'was', 'am'],
      correctAnswer: 0,
      points: 10,
    },
  ],
};

const lesson3: Lesson = {
  id: 'b2-u3-l3',
  unitId: 'b2-u3',
  title: 'Past perfect vs past perfect continuous',
  description: 'Understand when to use each past perfect form',
  order: 3,
  xpReward: 20,
  grammarPoint: 'Completed action vs ongoing duration',
  vocabularyWords: ['completed', 'ongoing', 'duration', 'finished', 'continued', 'process', 'result', 'activity'],
  exercises: [
    {
      id: 'b2-u3-l3-e1',
      type: 'multiple-choice',
      instruction: 'Select the correct answer',
      question: 'Past perfect continuous emphasizes:',
      options: ['The duration and ongoing nature', 'The completion of the action', 'The exact time it happened', 'The future result'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l3-e2',
      type: 'categorization',
      instruction: 'Classify these sentences',
      categories: ['Past Perfect (completed)', 'Past Perfect Continuous (duration)'],
      items: [
        { text: 'I had read three books.', category: 'Past Perfect (completed)' },
        { text: 'I had been reading for hours.', category: 'Past Perfect Continuous (duration)' },
        { text: 'She had finished her work.', category: 'Past Perfect (completed)' },
        { text: 'She had been working all day.', category: 'Past Perfect Continuous (duration)' },
      ],
      points: 10,
    },
    {
      id: 'b2-u3-l3-e3',
      type: 'context-completion',
      instruction: 'Choose the best option',
      context: 'He was tired because he ___ all day.',
      options: ['had been working', 'had worked', 'worked', 'has worked'],
      correctAnswer: 0,
      points: 10,
      explanation: 'Use continuous form to emphasize the duration and ongoing activity.',
    },
    {
      id: 'b2-u3-l3-e4',
      type: 'context-completion',
      instruction: 'Choose the best option',
      context: 'She ___ five emails before the meeting started.',
      options: ['had written', 'had been writing', 'wrote', 'has written'],
      correctAnswer: 0,
      points: 10,
      explanation: 'Use simple form when stating a completed number or quantity.',
    },
    {
      id: 'b2-u3-l3-e5',
      type: 'fill-blank',
      instruction: 'Complete with the best form',
      question: 'They ___ (play) tennis for two hours when it started raining.',
      correctAnswer: 'had been playing',
      points: 10,
    },
    {
      id: 'b2-u3-l3-e6',
      type: 'fill-blank',
      instruction: 'Complete with the best form',
      question: 'I ___ (finish) my homework before dinner.',
      correctAnswer: 'had finished',
      points: 10,
    },
    {
      id: 'b2-u3-l3-e7',
      type: 'multiple-choice',
      instruction: 'Which sentence focuses on duration?',
      question: 'Choose the sentence that emphasizes how long:',
      options: ['We had been living there for 10 years.', 'We had lived there.', 'We lived there.', 'We have lived there.'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l3-e8',
      type: 'translation',
      instruction: 'Translate to English (emphasizing duration)',
      question: 'Había estado lloviendo durante días.',
      correctAnswer: 'It had been raining for days',
      points: 10,
    },
    {
      id: 'b2-u3-l3-e9',
      type: 'matching',
      instruction: 'Match situations with appropriate forms',
      pairs: [
        { left: 'Emphasis on duration', right: 'had been working' },
        { left: 'Completed count', right: 'had written 3 letters' },
        { left: 'Ongoing activity', right: 'had been studying' },
        { left: 'Finished action', right: 'had completed' },
      ],
      points: 10,
    },
    {
      id: 'b2-u3-l3-e10',
      type: 'error-correction',
      instruction: 'Find and correct the error (if needed)',
      sentence: 'I had been written five reports before the meeting.',
      correctAnswer: 'I had written five reports before the meeting.',
      points: 10,
      errorExplanation: 'With a specific number/quantity, use past perfect simple, not continuous.',
    },
  ],
};

const lesson4: Lesson = {
  id: 'b2-u3-l4',
  unitId: 'b2-u3',
  title: 'For and since in the past',
  description: 'Use for and since with past perfect continuous',
  order: 4,
  xpReward: 20,
  grammarPoint: 'had been + -ing + for/since',
  vocabularyWords: ['for', 'since', 'hours', 'days', 'weeks', 'months', 'years', 'childhood'],
  exercises: [
    {
      id: 'b2-u3-l4-e1',
      type: 'multiple-choice',
      instruction: 'Select the correct answer',
      question: 'We use "for" with:',
      options: ['A period of time', 'A point in time', 'A specific date', 'Only present tenses'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l4-e2',
      type: 'fill-blank',
      instruction: 'Complete with for or since',
      question: 'I had been waiting ___ two hours when she arrived.',
      correctAnswer: 'for',
      points: 10,
    },
    {
      id: 'b2-u3-l4-e3',
      type: 'fill-blank',
      instruction: 'Complete with for or since',
      question: 'They had been living there ___ 2010.',
      correctAnswer: 'since',
      points: 10,
    },
    {
      id: 'b2-u3-l4-e4',
      type: 'categorization',
      instruction: 'Classify these time expressions',
      categories: ['Use FOR', 'Use SINCE'],
      items: [
        { text: 'three weeks', category: 'Use FOR' },
        { text: 'Monday', category: 'Use SINCE' },
        { text: 'a long time', category: 'Use FOR' },
        { text: 'last year', category: 'Use SINCE' },
      ],
      points: 10,
    },
    {
      id: 'b2-u3-l4-e5',
      type: 'translation',
      instruction: 'Translate to English',
      question: 'Había estado estudiando durante tres horas.',
      correctAnswer: 'I had been studying for three hours',
      points: 10,
    },
    {
      id: 'b2-u3-l4-e6',
      type: 'word-order',
      instruction: 'Put the words in the correct order',
      words: ['had', 'She', 'been', 'working', 'there', 'for', 'five', 'years'],
      correctOrder: [1, 0, 2, 3, 4, 5, 6, 7],
      points: 10,
    },
    {
      id: 'b2-u3-l4-e7',
      type: 'fill-blank',
      instruction: 'Complete the sentence',
      question: 'We had been playing football ___ hours before we got tired.',
      correctAnswer: 'for',
      points: 10,
    },
    {
      id: 'b2-u3-l4-e8',
      type: 'error-correction',
      instruction: 'Find and correct the error',
      sentence: 'He had been living here since five years.',
      correctAnswer: 'He had been living here for five years.',
      points: 10,
      errorExplanation: '"Five years" is a period of time, so use "for", not "since".',
    },
    {
      id: 'b2-u3-l4-e9',
      type: 'context-completion',
      instruction: 'Choose the best option',
      context: 'They had been dating ___ a year when they got engaged.',
      options: ['for', 'since', 'from', 'during'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l4-e10',
      type: 'matching',
      instruction: 'Match to make correct sentences',
      pairs: [
        { left: 'had been raining for', right: 'three days' },
        { left: 'had been raining since', right: 'Monday' },
        { left: 'had been waiting for', right: 'an hour' },
        { left: 'had been waiting since', right: '9 o\'clock' },
      ],
      points: 10,
    },
  ],
};

const lesson5: Lesson = {
  id: 'b2-u3-l5',
  unitId: 'b2-u3',
  title: 'Actions with visible results in the past',
  description: 'Express past actions that had visible evidence',
  order: 5,
  xpReward: 20,
  grammarPoint: 'Evidence of recent continuous past activity',
  vocabularyWords: ['tired', 'sweaty', 'wet', 'dirty', 'red eyes', 'exhausted', 'evidence', 'obvious'],
  exercises: [
    {
      id: 'b2-u3-l5-e1',
      type: 'multiple-choice',
      instruction: 'Select the correct answer',
      question: 'We use past perfect continuous when:',
      options: ['There was visible evidence of a past activity', 'We state exact numbers', 'Talking about the future', 'Making predictions'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l5-e2',
      type: 'context-completion',
      instruction: 'Choose the best option',
      context: 'His hands were dirty because he ___ in the garden.',
      options: ['had been working', 'had worked', 'worked', 'has worked'],
      correctAnswer: 0,
      points: 10,
      explanation: 'The dirty hands are evidence of the ongoing activity.',
    },
    {
      id: 'b2-u3-l5-e3',
      type: 'fill-blank',
      instruction: 'Complete the sentence',
      question: 'She was sweating because she ___ ___ running.',
      correctAnswer: 'had been',
      points: 10,
    },
    {
      id: 'b2-u3-l5-e4',
      type: 'translation',
      instruction: 'Translate to English',
      question: 'Sus ojos estaban rojos porque había estado llorando.',
      correctAnswer: 'Her eyes were red because she had been crying',
      points: 10,
    },
    {
      id: 'b2-u3-l5-e5',
      type: 'matching',
      instruction: 'Match the evidence with the activity',
      pairs: [
        { left: 'Wet hair', right: 'had been swimming' },
        { left: 'Tired eyes', right: 'had been reading' },
        { left: 'Paint on clothes', right: 'had been painting' },
        { left: 'Out of breath', right: 'had been running' },
      ],
      points: 10,
    },
    {
      id: 'b2-u3-l5-e6',
      type: 'word-order',
      instruction: 'Put the words in the correct order',
      words: ['exhausted', 'was', 'He', 'because', 'he', 'had', 'been', 'working', 'all', 'day'],
      correctOrder: [2, 1, 0, 3, 4, 5, 6, 7, 8, 9],
      points: 10,
    },
    {
      id: 'b2-u3-l5-e7',
      type: 'fill-blank',
      instruction: 'Complete the sentence',
      question: 'The ground was wet because it ___ ___ raining.',
      correctAnswer: 'had been',
      points: 10,
    },
    {
      id: 'b2-u3-l5-e8',
      type: 'dialogue-completion',
      instruction: 'Complete the conversation',
      dialogue: [
        { speaker: 'A', text: 'Why were your clothes so dirty?' },
        { speaker: 'B', text: 'I ___ playing football.', isBlank: true },
      ],
      options: ['had been', 'have been', 'was', 'am'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l5-e9',
      type: 'context-completion',
      instruction: 'Choose the best option',
      context: 'Her voice was hoarse. She ___ for hours.',
      options: ['had been singing', 'had sung', 'sang', 'has sung'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l5-e10',
      type: 'error-correction',
      instruction: 'Find and correct the error',
      sentence: 'They were tired because they have been traveling all day.',
      correctAnswer: 'They were tired because they had been traveling all day.',
      points: 10,
      errorExplanation: 'Use past perfect continuous (had been), not present perfect continuous.',
    },
  ],
};

const lesson6: Lesson = {
  id: 'b2-u3-l6',
  unitId: 'b2-u3',
  title: 'How long questions in the past',
  description: 'Ask about duration before a past moment',
  order: 6,
  xpReward: 20,
  grammarPoint: 'How long had you been...?',
  vocabularyWords: ['how long', 'duration', 'before', 'when', 'until', 'by the time'],
  exercises: [
    {
      id: 'b2-u3-l6-e1',
      type: 'multiple-choice',
      instruction: 'Select the correct answer',
      question: 'How do we ask about duration in past perfect continuous?',
      options: ['How long had you been...?', 'How long have you been...?', 'How long are you...?', 'How long will you be...?'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l6-e2',
      type: 'word-order',
      instruction: 'Put the words in the correct order',
      words: ['How', 'long', 'had', 'you', 'been', 'waiting'],
      correctOrder: [0, 1, 2, 3, 4, 5],
      points: 10,
    },
    {
      id: 'b2-u3-l6-e3',
      type: 'fill-blank',
      instruction: 'Complete the question',
      question: 'How long ___ she ___ studying before the test?',
      correctAnswer: 'had been',
      points: 10,
    },
    {
      id: 'b2-u3-l6-e4',
      type: 'translation',
      instruction: 'Translate to English',
      question: '¿Cuánto tiempo habías estado esperando?',
      correctAnswer: 'How long had you been waiting',
      points: 10,
    },
    {
      id: 'b2-u3-l6-e5',
      type: 'dialogue-completion',
      instruction: 'Complete the conversation',
      dialogue: [
        { speaker: 'A', text: 'How long had you been living there when you moved?' },
        { speaker: 'B', text: 'We ___ living there for 5 years.', isBlank: true },
      ],
      options: ['had been', 'have been', 'were', 'are'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l6-e6',
      type: 'fill-blank',
      instruction: 'Complete the question',
      question: 'How long ___ they ___ working on the project?',
      correctAnswer: 'had been',
      points: 10,
    },
    {
      id: 'b2-u3-l6-e7',
      type: 'word-order',
      instruction: 'Put the words in the correct order',
      words: ['had', 'How', 'long', 'been', 'he', 'playing', 'tennis'],
      correctOrder: [1, 2, 0, 4, 3, 5, 6],
      points: 10,
    },
    {
      id: 'b2-u3-l6-e8',
      type: 'error-correction',
      instruction: 'Find and correct the error',
      sentence: 'How long have you been waiting when I arrived?',
      correctAnswer: 'How long had you been waiting when I arrived?',
      points: 10,
      errorExplanation: 'Use past perfect continuous (had been) when asking about duration before a past moment.',
    },
    {
      id: 'b2-u3-l6-e9',
      type: 'context-completion',
      instruction: 'Choose the best option',
      context: 'A: ___ had you been working there? B: For about 3 years.',
      options: ['How long', 'When', 'Why', 'Where'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l6-e10',
      type: 'matching',
      instruction: 'Match questions with appropriate answers',
      pairs: [
        { left: 'How long had you been waiting?', right: 'For two hours.' },
        { left: 'How long had she been studying?', right: 'Since morning.' },
        { left: 'How long had they been living there?', right: 'For 10 years.' },
        { left: 'How long had he been working?', right: 'Since 8 am.' },
      ],
      points: 10,
    },
  ],
};

const lesson7: Lesson = {
  id: 'b2-u3-l7',
  unitId: 'b2-u3',
  title: 'Because clauses showing cause',
  description: 'Explain reasons using past perfect continuous',
  order: 7,
  xpReward: 20,
  grammarPoint: 'Because + had been + -ing',
  vocabularyWords: ['because', 'since', 'as', 'reason', 'cause', 'result', 'consequence', 'explanation'],
  exercises: [
    {
      id: 'b2-u3-l7-e1',
      type: 'multiple-choice',
      instruction: 'Select the correct answer',
      question: 'We use "because" with past perfect continuous to:',
      options: ['Explain the reason for a past situation', 'Talk about future plans', 'Make predictions', 'Give commands'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l7-e2',
      type: 'fill-blank',
      instruction: 'Complete the sentence',
      question: 'I was tired because I ___ ___ working all night.',
      correctAnswer: 'had been',
      points: 10,
    },
    {
      id: 'b2-u3-l7-e3',
      type: 'word-order',
      instruction: 'Put the words in the correct order',
      words: ['was', 'She', 'happy', 'because', 'she', 'had', 'been', 'studying', 'hard'],
      correctOrder: [1, 0, 2, 3, 4, 5, 6, 7, 8],
      points: 10,
    },
    {
      id: 'b2-u3-l7-e4',
      type: 'translation',
      instruction: 'Translate to English',
      question: 'Estaba cansado porque había estado corriendo.',
      correctAnswer: 'I was tired because I had been running',
      points: 10,
    },
    {
      id: 'b2-u3-l7-e5',
      type: 'context-completion',
      instruction: 'Choose the best option',
      context: 'They failed the test because they ___ studying.',
      options: ['hadn\'t been', 'haven\'t been', 'weren\'t', 'aren\'t'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l7-e6',
      type: 'fill-blank',
      instruction: 'Complete the sentence',
      question: 'He knew the answer because he ___ ___ reading about it.',
      correctAnswer: 'had been',
      points: 10,
    },
    {
      id: 'b2-u3-l7-e7',
      type: 'matching',
      instruction: 'Match the results with their causes',
      pairs: [
        { left: 'I was hungry', right: 'because I hadn\'t been eating' },
        { left: 'She was exhausted', right: 'because she had been working' },
        { left: 'They were wet', right: 'because they had been swimming' },
        { left: 'He was angry', right: 'because he had been waiting' },
      ],
      points: 10,
    },
    {
      id: 'b2-u3-l7-e8',
      type: 'dialogue-completion',
      instruction: 'Complete the conversation',
      dialogue: [
        { speaker: 'A', text: 'Why were you so tired yesterday?' },
        { speaker: 'B', text: 'Because I ___ working late.', isBlank: true },
      ],
      options: ['had been', 'have been', 'was', 'am'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l7-e9',
      type: 'error-correction',
      instruction: 'Find and correct the error',
      sentence: 'She was upset because she has been arguing with her friend.',
      correctAnswer: 'She was upset because she had been arguing with her friend.',
      points: 10,
      errorExplanation: 'Use past perfect continuous (had been), not present perfect continuous.',
    },
    {
      id: 'b2-u3-l7-e10',
      type: 'fill-blank',
      instruction: 'Complete the sentence',
      question: 'The road was icy because it ___ ___ snowing.',
      correctAnswer: 'had been',
      points: 10,
    },
  ],
};

const lesson8: Lesson = {
  id: 'b2-u3-l8',
  unitId: 'b2-u3',
  title: 'Time expressions: for hours, all morning',
  description: 'Use common time expressions with past perfect continuous',
  order: 8,
  xpReward: 20,
  grammarPoint: 'Time expressions showing duration',
  vocabularyWords: ['for hours', 'all day', 'all morning', 'all night', 'for ages', 'for weeks', 'for months', 'the whole time'],
  exercises: [
    {
      id: 'b2-u3-l8-e1',
      type: 'multiple-choice',
      instruction: 'Select the correct answer',
      question: 'Which time expression shows continuous duration?',
      options: ['all morning', 'at 9 am', 'yesterday', 'last week'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l8-e2',
      type: 'fill-blank',
      instruction: 'Complete the sentence',
      question: 'I had been working ___ all day when she called.',
      correctAnswer: 'for hours',
      acceptableAnswers: ['all day', 'hard'],
      points: 10,
    },
    {
      id: 'b2-u3-l8-e3',
      type: 'categorization',
      instruction: 'Classify these time expressions',
      categories: ['Shows duration', 'Shows specific time'],
      items: [
        { text: 'for hours', category: 'Shows duration' },
        { text: 'at 3 pm', category: 'Shows specific time' },
        { text: 'all morning', category: 'Shows duration' },
        { text: 'on Monday', category: 'Shows specific time' },
      ],
      points: 10,
    },
    {
      id: 'b2-u3-l8-e4',
      type: 'translation',
      instruction: 'Translate to English',
      question: 'Había estado estudiando toda la noche.',
      correctAnswer: 'I had been studying all night',
      points: 10,
    },
    {
      id: 'b2-u3-l8-e5',
      type: 'fill-blank',
      instruction: 'Complete the sentence',
      question: 'They had been playing ___ when it started raining.',
      correctAnswer: 'for hours',
      acceptableAnswers: ['all afternoon', 'for ages'],
      points: 10,
    },
    {
      id: 'b2-u3-l8-e6',
      type: 'word-order',
      instruction: 'Put the words in the correct order',
      words: ['had', 'She', 'been', 'waiting', 'for', 'ages'],
      correctOrder: [1, 0, 2, 3, 4, 5],
      points: 10,
    },
    {
      id: 'b2-u3-l8-e7',
      type: 'context-completion',
      instruction: 'Choose the best option',
      context: 'He had been driving ___ when he finally found a gas station.',
      options: ['for hours', 'at 5 pm', 'yesterday', 'next week'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l8-e8',
      type: 'matching',
      instruction: 'Match to make natural sentences',
      pairs: [
        { left: 'had been raining', right: 'all morning' },
        { left: 'had been studying', right: 'for weeks' },
        { left: 'had been working', right: 'all night' },
        { left: 'had been waiting', right: 'for ages' },
      ],
      points: 10,
    },
    {
      id: 'b2-u3-l8-e9',
      type: 'fill-blank',
      instruction: 'Complete the sentence',
      question: 'We had been traveling ___ the whole day before we arrived.',
      correctAnswer: 'for hours',
      acceptableAnswers: ['all day'],
      points: 10,
    },
    {
      id: 'b2-u3-l8-e10',
      type: 'error-correction',
      instruction: 'Find and correct the error',
      sentence: 'I had been sleeping at 10 pm when she called.',
      correctAnswer: 'I had been sleeping for hours when she called.',
      points: 10,
      errorExplanation: 'Use duration expressions (for hours) with continuous tenses, not specific times.',
    },
  ],
};

const lesson9: Lesson = {
  id: 'b2-u3-l9',
  unitId: 'b2-u3',
  title: 'Emphasis on duration',
  description: 'Emphasize how long an action had been continuing',
  order: 9,
  xpReward: 20,
  grammarPoint: 'Stressing the ongoing nature of past actions',
  vocabularyWords: ['emphasis', 'duration', 'continuous', 'ongoing', 'lengthy', 'prolonged', 'extended', 'sustained'],
  exercises: [
    {
      id: 'b2-u3-l9-e1',
      type: 'multiple-choice',
      instruction: 'Select the correct answer',
      question: 'Past perfect continuous emphasizes:',
      options: ['How long something continued', 'The exact moment it ended', 'How many times it happened', 'When it will happen again'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l9-e2',
      type: 'context-completion',
      instruction: 'Which emphasizes duration more?',
      context: 'To emphasize how long you waited:',
      options: ['I had been waiting for three hours.', 'I had waited.', 'I waited.', 'I wait.'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l9-e3',
      type: 'fill-blank',
      instruction: 'Complete to emphasize duration',
      question: 'She ___ ___ practicing piano for years before the concert.',
      correctAnswer: 'had been',
      points: 10,
    },
    {
      id: 'b2-u3-l9-e4',
      type: 'translation',
      instruction: 'Translate to English (emphasizing duration)',
      question: 'Habían estado construyendo la casa durante meses.',
      correctAnswer: 'They had been building the house for months',
      points: 10,
    },
    {
      id: 'b2-u3-l9-e5',
      type: 'categorization',
      instruction: 'Which sentences emphasize duration?',
      categories: ['Emphasizes duration', 'States completion'],
      items: [
        { text: 'I had been running for an hour.', category: 'Emphasizes duration' },
        { text: 'I had run 5 miles.', category: 'States completion' },
        { text: 'She had been studying all day.', category: 'Emphasizes duration' },
        { text: 'She had finished the book.', category: 'States completion' },
      ],
      points: 10,
    },
    {
      id: 'b2-u3-l9-e6',
      type: 'word-order',
      instruction: 'Put the words in the correct order',
      words: ['had', 'We', 'been', 'traveling', 'for', 'months', 'before', 'we', 'settled'],
      correctOrder: [1, 0, 2, 3, 4, 5, 6, 7, 8],
      points: 10,
    },
    {
      id: 'b2-u3-l9-e7',
      type: 'dialogue-completion',
      instruction: 'Complete the conversation',
      dialogue: [
        { speaker: 'A', text: 'How long had you been learning English?' },
        { speaker: 'B', text: 'I ___ learning it for 5 years.', isBlank: true },
      ],
      options: ['had been', 'have been', 'was', 'am'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l9-e8',
      type: 'fill-blank',
      instruction: 'Complete the sentence',
      question: 'By the time she arrived, I ___ ___ waiting for ages.',
      correctAnswer: 'had been',
      points: 10,
    },
    {
      id: 'b2-u3-l9-e9',
      type: 'matching',
      instruction: 'Match emphasis levels',
      pairs: [
        { left: 'Most emphasis on duration', right: 'had been working for 12 hours' },
        { left: 'Neutral statement', right: 'had worked' },
        { left: 'Emphasis on completion', right: 'had finished the work' },
        { left: 'Emphasis on ongoing', right: 'had been working all day' },
      ],
      points: 10,
    },
    {
      id: 'b2-u3-l9-e10',
      type: 'error-correction',
      instruction: 'Improve to emphasize duration',
      sentence: 'They had lived there when we met them.',
      correctAnswer: 'They had been living there for years when we met them.',
      points: 10,
      errorExplanation: 'To emphasize duration, use past perfect continuous with a time expression.',
    },
  ],
};

const lesson10: Lesson = {
  id: 'b2-u3-l10',
  unitId: 'b2-u3',
  title: 'Interrupted actions in the past',
  description: 'Express actions interrupted by another past event',
  order: 10,
  xpReward: 20,
  grammarPoint: 'Ongoing action interrupted by past simple',
  vocabularyWords: ['when', 'while', 'before', 'until', 'interrupted', 'stopped', 'suddenly', 'moment'],
  exercises: [
    {
      id: 'b2-u3-l10-e1',
      type: 'multiple-choice',
      instruction: 'Select the correct answer',
      question: 'We use past perfect continuous for:',
      options: ['The ongoing action that was interrupted', 'The interrupting action', 'Both actions equally', 'Future actions'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l10-e2',
      type: 'fill-blank',
      instruction: 'Complete the sentence',
      question: 'I ___ ___ sleeping when the phone rang.',
      correctAnswer: 'had been',
      points: 10,
    },
    {
      id: 'b2-u3-l10-e3',
      type: 'word-order',
      instruction: 'Put the words in the correct order',
      words: ['had', 'They', 'been', 'playing', 'when', 'it', 'started', 'raining'],
      correctOrder: [1, 0, 2, 3, 4, 5, 6, 7],
      points: 10,
    },
    {
      id: 'b2-u3-l10-e4',
      type: 'translation',
      instruction: 'Translate to English',
      question: 'Había estado estudiando cuando llegó mi amigo.',
      correctAnswer: 'I had been studying when my friend arrived',
      points: 10,
    },
    {
      id: 'b2-u3-l10-e5',
      type: 'context-completion',
      instruction: 'Choose the best option',
      context: 'She ___ for hours when her boss finally called.',
      options: ['had been waiting', 'had waited', 'waited', 'waits'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l10-e6',
      type: 'categorization',
      instruction: 'Identify the actions',
      categories: ['Ongoing (use past perfect continuous)', 'Interrupting (use past simple)'],
      items: [
        { text: 'sleeping peacefully', category: 'Ongoing (use past perfect continuous)' },
        { text: 'the alarm rang', category: 'Interrupting (use past simple)' },
        { text: 'working hard', category: 'Ongoing (use past perfect continuous)' },
        { text: 'the power went out', category: 'Interrupting (use past simple)' },
      ],
      points: 10,
    },
    {
      id: 'b2-u3-l10-e7',
      type: 'fill-blank',
      instruction: 'Complete the sentence',
      question: 'We ___ ___ watching TV when the lights went out.',
      correctAnswer: 'had been',
      points: 10,
    },
    {
      id: 'b2-u3-l10-e8',
      type: 'matching',
      instruction: 'Match ongoing actions with interruptions',
      pairs: [
        { left: 'had been cooking', right: 'when the smoke alarm went off' },
        { left: 'had been driving', right: 'when the tire blew out' },
        { left: 'had been reading', right: 'when the phone rang' },
        { left: 'had been sleeping', right: 'when the storm started' },
      ],
      points: 10,
    },
    {
      id: 'b2-u3-l10-e9',
      type: 'error-correction',
      instruction: 'Find and correct the error',
      sentence: 'I have been working when she interrupted me.',
      correctAnswer: 'I had been working when she interrupted me.',
      points: 10,
      errorExplanation: 'Use past perfect continuous (had been) for the ongoing past action.',
    },
    {
      id: 'b2-u3-l10-e10',
      type: 'dialogue-completion',
      instruction: 'Complete the conversation',
      dialogue: [
        { speaker: 'A', text: 'What were you doing when I called?' },
        { speaker: 'B', text: 'I ___ exercising.', isBlank: true },
      ],
      options: ['had been', 'have been', 'was', 'am'],
      correctAnswer: 0,
      points: 10,
    },
  ],
};

const lesson11: Lesson = {
  id: 'b2-u3-l11',
  unitId: 'b2-u3',
  title: 'Reported speech usage',
  description: 'Use past perfect continuous in reported speech',
  order: 11,
  xpReward: 20,
  grammarPoint: 'Reporting continuous past actions',
  vocabularyWords: ['said', 'told', 'mentioned', 'explained', 'reported', 'admitted', 'claimed', 'stated'],
  exercises: [
    {
      id: 'b2-u3-l11-e1',
      type: 'multiple-choice',
      instruction: 'Select the correct answer',
      question: 'When reporting "I have been working", we say:',
      options: ['He said he had been working.', 'He said he has been working.', 'He said he is working.', 'He said he works.'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l11-e2',
      type: 'fill-blank',
      instruction: 'Complete the reported speech',
      question: 'She said, "I have been studying all day." → She said she ___ ___ studying all day.',
      correctAnswer: 'had been',
      points: 10,
    },
    {
      id: 'b2-u3-l11-e3',
      type: 'translation',
      instruction: 'Translate to English (reported speech)',
      question: 'Él dijo que había estado trabajando.',
      correctAnswer: 'He said he had been working',
      acceptableAnswers: ['He said that he had been working'],
      points: 10,
    },
    {
      id: 'b2-u3-l11-e4',
      type: 'word-order',
      instruction: 'Put the words in the correct order',
      words: ['told', 'She', 'me', 'she', 'had', 'been', 'waiting', 'for', 'hours'],
      correctOrder: [1, 0, 2, 3, 4, 5, 6, 7, 8],
      points: 10,
    },
    {
      id: 'b2-u3-l11-e5',
      type: 'context-completion',
      instruction: 'Choose the best option',
      context: 'He said, "I have been living here for 5 years." → He said he ___ living there for 5 years.',
      options: ['had been', 'has been', 'was', 'is'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l11-e6',
      type: 'fill-blank',
      instruction: 'Complete the reported speech',
      question: 'They said, "We have been traveling." → They said they ___ ___ traveling.',
      correctAnswer: 'had been',
      points: 10,
    },
    {
      id: 'b2-u3-l11-e7',
      type: 'matching',
      instruction: 'Match direct speech with reported speech',
      pairs: [
        { left: 'I have been working.', right: 'She said she had been working.' },
        { left: 'We have been waiting.', right: 'They said they had been waiting.' },
        { left: 'He has been studying.', right: 'She said he had been studying.' },
        { left: 'They have been playing.', right: 'He said they had been playing.' },
      ],
      points: 10,
    },
    {
      id: 'b2-u3-l11-e8',
      type: 'error-correction',
      instruction: 'Find and correct the error',
      sentence: 'She told me she has been waiting for me.',
      correctAnswer: 'She told me she had been waiting for me.',
      points: 10,
      errorExplanation: 'In reported speech, present perfect continuous becomes past perfect continuous.',
    },
    {
      id: 'b2-u3-l11-e9',
      type: 'dialogue-completion',
      instruction: 'Complete the conversation',
      dialogue: [
        { speaker: 'A', text: 'What did he say?' },
        { speaker: 'B', text: 'He said he ___ working on it all week.', isBlank: true },
      ],
      options: ['had been', 'has been', 'was', 'is'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l11-e10',
      type: 'fill-blank',
      instruction: 'Complete the reported speech',
      question: 'He admitted that he ___ ___ sleeping instead of studying.',
      correctAnswer: 'had been',
      points: 10,
    },
  ],
};

const lesson12: Lesson = {
  id: 'b2-u3-l12',
  unitId: 'b2-u3',
  title: 'Questions and negatives',
  description: 'Form questions and negative sentences',
  order: 12,
  xpReward: 20,
  grammarPoint: 'Had you been...? / hadn\'t been + -ing',
  vocabularyWords: ['hadn\'t', 'had not', 'question', 'negative', 'denial', 'interrogative'],
  exercises: [
    {
      id: 'b2-u3-l12-e1',
      type: 'multiple-choice',
      instruction: 'Select the correct answer',
      question: 'How do we form questions in past perfect continuous?',
      options: ['Had + subject + been + -ing?', 'Have + subject + been + -ing?', 'Subject + had + been + -ing?', 'Do + subject + been + -ing?'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l12-e2',
      type: 'word-order',
      instruction: 'Put the words in the correct order',
      words: ['Had', 'you', 'been', 'waiting', 'long'],
      correctOrder: [0, 1, 2, 3, 4],
      points: 10,
    },
    {
      id: 'b2-u3-l12-e3',
      type: 'fill-blank',
      instruction: 'Complete the negative sentence',
      question: 'I ___ been working. I was resting.',
      correctAnswer: 'hadn\'t',
      acceptableAnswers: ['had not'],
      points: 10,
    },
    {
      id: 'b2-u3-l12-e4',
      type: 'translation',
      instruction: 'Translate to English',
      question: '¿Habías estado esperando mucho tiempo?',
      correctAnswer: 'Had you been waiting long',
      acceptableAnswers: ['Had you been waiting for a long time'],
      points: 10,
    },
    {
      id: 'b2-u3-l12-e5',
      type: 'fill-blank',
      instruction: 'Complete the question',
      question: '___ she ___ studying before the test?',
      correctAnswer: 'Had been',
      points: 10,
    },
    {
      id: 'b2-u3-l12-e6',
      type: 'categorization',
      instruction: 'Classify these sentences',
      categories: ['Question', 'Negative', 'Affirmative'],
      items: [
        { text: 'Had you been working?', category: 'Question' },
        { text: 'I hadn\'t been sleeping.', category: 'Negative' },
        { text: 'She had been waiting.', category: 'Affirmative' },
        { text: 'Had they been playing?', category: 'Question' },
      ],
      points: 10,
    },
    {
      id: 'b2-u3-l12-e7',
      type: 'word-order',
      instruction: 'Put the words in the correct order',
      words: ['hadn\'t', 'They', 'been', 'paying', 'attention'],
      correctOrder: [1, 0, 2, 3, 4],
      points: 10,
    },
    {
      id: 'b2-u3-l12-e8',
      type: 'dialogue-completion',
      instruction: 'Complete the conversation',
      dialogue: [
        { speaker: 'A', text: 'Had you been waiting long?' },
        { speaker: 'B', text: 'No, I ___.', isBlank: true },
      ],
      options: ['hadn\'t', 'haven\'t', 'wasn\'t', 'didn\'t'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l12-e9',
      type: 'error-correction',
      instruction: 'Find and correct the error',
      sentence: 'Have you been working there long?',
      correctAnswer: 'Had you been working there long?',
      points: 10,
      errorExplanation: 'For past situations, use past perfect continuous (Had you been), not present perfect continuous.',
    },
    {
      id: 'b2-u3-l12-e10',
      type: 'matching',
      instruction: 'Match questions with short answers',
      pairs: [
        { left: 'Had you been waiting?', right: 'Yes, I had.' },
        { left: 'Had she been studying?', right: 'No, she hadn\'t.' },
        { left: 'Had they been playing?', right: 'Yes, they had.' },
        { left: 'Had he been working?', right: 'No, he hadn\'t.' },
      ],
      points: 10,
    },
  ],
};

const lesson13: Lesson = {
  id: 'b2-u3-l13',
  unitId: 'b2-u3',
  title: 'Common mistakes',
  description: 'Avoid typical errors with past perfect continuous',
  order: 13,
  xpReward: 20,
  grammarPoint: 'Common errors and corrections',
  vocabularyWords: ['mistake', 'error', 'correction', 'common', 'typical', 'avoid', 'incorrect', 'wrong'],
  exercises: [
    {
      id: 'b2-u3-l13-e1',
      type: 'error-correction',
      instruction: 'Find and correct the error',
      sentence: 'I have been working all day before she arrived.',
      correctAnswer: 'I had been working all day before she arrived.',
      points: 10,
      errorExplanation: 'Use past perfect continuous (had been), not present perfect continuous.',
    },
    {
      id: 'b2-u3-l13-e2',
      type: 'error-correction',
      instruction: 'Find and correct the error',
      sentence: 'She had been wrote five letters.',
      correctAnswer: 'She had written five letters.',
      points: 10,
      errorExplanation: 'With specific numbers, use past perfect simple (had written), not continuous.',
    },
    {
      id: 'b2-u3-l13-e3',
      type: 'multiple-choice',
      instruction: 'Select the correct sentence',
      question: 'Which sentence is correct?',
      options: ['They had been waiting for hours.', 'They had been wait for hours.', 'They had waiting for hours.', 'They been waiting for hours.'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l13-e4',
      type: 'error-correction',
      instruction: 'Find and correct the error',
      sentence: 'How long you had been living there?',
      correctAnswer: 'How long had you been living there?',
      points: 10,
      errorExplanation: 'In questions, put "had" before the subject.',
    },
    {
      id: 'b2-u3-l13-e5',
      type: 'true-false',
      instruction: 'Is this statement correct?',
      statement: '"I had been finished" is grammatically correct.',
      correctAnswer: false,
      points: 10,
      explanation: 'We don\'t use past perfect continuous with state verbs like "finish". Say "I had finished".',
    },
    {
      id: 'b2-u3-l13-e6',
      type: 'error-correction',
      instruction: 'Find and correct the error',
      sentence: 'He had been knowing her for years.',
      correctAnswer: 'He had known her for years.',
      points: 10,
      errorExplanation: '"Know" is a state verb and is not used in continuous tenses.',
    },
    {
      id: 'b2-u3-l13-e7',
      type: 'categorization',
      instruction: 'Classify these sentences',
      categories: ['Correct', 'Incorrect'],
      items: [
        { text: 'I had been waiting for hours.', category: 'Correct' },
        { text: 'I had been wait for hours.', category: 'Incorrect' },
        { text: 'She had been studying.', category: 'Correct' },
        { text: 'She had been study.', category: 'Incorrect' },
      ],
      points: 10,
    },
    {
      id: 'b2-u3-l13-e8',
      type: 'error-correction',
      instruction: 'Find and correct the error',
      sentence: 'We had been living here since 5 years.',
      correctAnswer: 'We had been living here for 5 years.',
      points: 10,
      errorExplanation: 'Use "for" with periods of time, not "since".',
    },
    {
      id: 'b2-u3-l13-e9',
      type: 'multiple-choice',
      instruction: 'Select the incorrect sentence',
      question: 'Which sentence has an error?',
      options: ['I had been believing it was true.', 'I had been working all day.', 'She had been studying for hours.', 'They had been playing tennis.'],
      correctAnswer: 0,
      points: 10,
      explanation: '"Believe" is a state verb and should not be used in continuous tenses.',
    },
    {
      id: 'b2-u3-l13-e10',
      type: 'error-correction',
      instruction: 'Find and correct the error',
      sentence: 'Had you been wrote the report?',
      correctAnswer: 'Had you been writing the report?',
      points: 10,
      errorExplanation: 'Use the -ing form (writing), not the past participle (wrote).',
    },
  ],
};

const lesson14: Lesson = {
  id: 'b2-u3-l14',
  unitId: 'b2-u3',
  title: 'Past perfect continuous in narratives',
  description: 'Use past perfect continuous in storytelling',
  order: 14,
  xpReward: 20,
  grammarPoint: 'Setting background in stories',
  vocabularyWords: ['narrative', 'story', 'background', 'setting', 'context', 'scene', 'describe', 'explain'],
  exercises: [
    {
      id: 'b2-u3-l14-e1',
      type: 'multiple-choice',
      instruction: 'Select the correct answer',
      question: 'In narratives, past perfect continuous is used to:',
      options: ['Provide background to main events', 'Describe the main action', 'Talk about the future', 'Give commands'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l14-e2',
      type: 'fill-blank',
      instruction: 'Complete the narrative',
      question: 'The streets were wet. It ___ ___ raining all morning.',
      correctAnswer: 'had been',
      points: 10,
    },
    {
      id: 'b2-u3-l14-e3',
      type: 'context-completion',
      instruction: 'Choose the best option',
      context: 'She looked exhausted. She ___ all night to finish the project.',
      options: ['had been working', 'had worked', 'worked', 'works'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l14-e4',
      type: 'word-order',
      instruction: 'Put the words in the correct order',
      words: ['had', 'He', 'been', 'driving', 'for', 'hours', 'before', 'he', 'stopped'],
      correctOrder: [1, 0, 2, 3, 4, 5, 6, 7, 8],
      points: 10,
    },
    {
      id: 'b2-u3-l14-e5',
      type: 'fill-blank',
      instruction: 'Complete the narrative',
      question: 'The garden was beautiful. She ___ ___ working on it for months.',
      correctAnswer: 'had been',
      points: 10,
    },
    {
      id: 'b2-u3-l14-e6',
      type: 'translation',
      instruction: 'Translate to English',
      question: 'Estaba cansado. Había estado corriendo durante horas.',
      correctAnswer: 'He was tired. He had been running for hours',
      points: 10,
    },
    {
      id: 'b2-u3-l14-e7',
      type: 'matching',
      instruction: 'Match the evidence with background activity',
      pairs: [
        { left: 'Her eyes were red.', right: 'She had been crying.' },
        { left: 'The room was messy.', right: 'They had been playing.' },
        { left: 'He was out of breath.', right: 'He had been running.' },
        { left: 'The kitchen smelled good.', right: 'She had been cooking.' },
      ],
      points: 10,
    },
    {
      id: 'b2-u3-l14-e8',
      type: 'dialogue-completion',
      instruction: 'Complete the narrative',
      dialogue: [
        { speaker: 'A', text: 'When I arrived, the house was warm and cozy.' },
        { speaker: 'B', text: 'Yes, I ___ preparing for your arrival all day.', isBlank: true },
      ],
      options: ['had been', 'have been', 'was', 'am'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l14-e9',
      type: 'fill-blank',
      instruction: 'Complete the narrative',
      question: 'When we met, she told me she ___ ___ thinking about me.',
      correctAnswer: 'had been',
      points: 10,
    },
    {
      id: 'b2-u3-l14-e10',
      type: 'context-completion',
      instruction: 'Choose the best option',
      context: 'The concert was amazing. The band ___ practicing for months.',
      options: ['had been', 'have been', 'were', 'are'],
      correctAnswer: 0,
      points: 10,
    },
  ],
};

const lesson15: Lesson = {
  id: 'b2-u3-l15',
  unitId: 'b2-u3',
  title: 'Comprehensive review',
  description: 'Review all aspects of past perfect continuous',
  order: 15,
  xpReward: 20,
  grammarPoint: 'Complete review of past perfect continuous',
  vocabularyWords: ['review', 'comprehensive', 'practice', 'mastery', 'complete', 'all aspects'],
  exercises: [
    {
      id: 'b2-u3-l15-e1',
      type: 'fill-blank',
      instruction: 'Complete the sentence',
      question: 'I ___ ___ waiting for two hours when she finally called.',
      correctAnswer: 'had been',
      points: 10,
    },
    {
      id: 'b2-u3-l15-e2',
      type: 'word-order',
      instruction: 'Put the words in the correct order',
      words: ['How', 'long', 'had', 'you', 'been', 'studying', 'English'],
      correctOrder: [0, 1, 2, 3, 4, 5, 6],
      points: 10,
    },
    {
      id: 'b2-u3-l15-e3',
      type: 'translation',
      instruction: 'Translate to English',
      question: 'Habían estado viviendo allí durante años antes de mudarse.',
      correctAnswer: 'They had been living there for years before moving',
      acceptableAnswers: ['They had been living there for years before they moved'],
      points: 10,
    },
    {
      id: 'b2-u3-l15-e4',
      type: 'error-correction',
      instruction: 'Find and correct the error',
      sentence: 'She have been working all day before she went home.',
      correctAnswer: 'She had been working all day before she went home.',
      points: 10,
      errorExplanation: 'Use "had been", not "have been" for past perfect continuous.',
    },
    {
      id: 'b2-u3-l15-e5',
      type: 'context-completion',
      instruction: 'Choose the best option',
      context: 'He was tired because he ___ all night.',
      options: ['had been working', 'has been working', 'was working', 'is working'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l15-e6',
      type: 'categorization',
      instruction: 'Classify these sentences by use',
      categories: ['Duration emphasis', 'Visible results', 'Interrupted action'],
      items: [
        { text: 'I had been running for an hour.', category: 'Duration emphasis' },
        { text: 'He was sweating because he had been exercising.', category: 'Visible results' },
        { text: 'They had been sleeping when the alarm rang.', category: 'Interrupted action' },
        { text: 'She had been studying for months.', category: 'Duration emphasis' },
      ],
      points: 10,
    },
    {
      id: 'b2-u3-l15-e7',
      type: 'fill-blank',
      instruction: 'Complete with for or since',
      question: 'We had been traveling ___ three weeks when we arrived home.',
      correctAnswer: 'for',
      points: 10,
    },
    {
      id: 'b2-u3-l15-e8',
      type: 'matching',
      instruction: 'Match to make correct sentences',
      pairs: [
        { left: 'How long had', right: 'you been waiting?' },
        { left: 'She hadn\'t been', right: 'feeling well.' },
        { left: 'Had they been', right: 'living there long?' },
        { left: 'I had been', right: 'working all day.' },
      ],
      points: 10,
    },
    {
      id: 'b2-u3-l15-e9',
      type: 'dialogue-completion',
      instruction: 'Complete the conversation',
      dialogue: [
        { speaker: 'A', text: 'You looked exhausted yesterday.' },
        { speaker: 'B', text: 'Yes, I ___ studying for my exams all week.', isBlank: true },
      ],
      options: ['had been', 'have been', 'was', 'am'],
      correctAnswer: 0,
      points: 10,
    },
    {
      id: 'b2-u3-l15-e10',
      type: 'multiple-choice',
      instruction: 'Select the correct answer',
      question: 'Which sentence emphasizes duration?',
      options: ['I had been working for 12 hours.', 'I had worked 12 hours.', 'I worked 12 hours.', 'I work 12 hours.'],
      correctAnswer: 0,
      points: 10,
    },
  ],
};

export const unit3: Unit = {
  id: 'b2-u3',
  levelId: 'b2',
  title: 'Past Perfect Continuous',
  description: 'Express ongoing actions that were in progress before another past action',
  order: 3,
  totalLessons: 15,
  icon: '⏪',
  lessons: [
    lesson1,
    lesson2,
    lesson3,
    lesson4,
    lesson5,
    lesson6,
    lesson7,
    lesson8,
    lesson9,
    lesson10,
    lesson11,
    lesson12,
    lesson13,
    lesson14,
    lesson15,
  ],
};
